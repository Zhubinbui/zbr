<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Document</title>
</head>

<body></body>
<script>
  /***
   *  async await
   *  ----promise的语法糖
   *   async ---- 将函数的返回值 转换成 promise对象
   *   await ---- 返回一个promise的结果值
   *   await ---- 接promise对象/状态发生改变 才会返回结果值
   * */

  // const sid = setTimeout(() => {});
  // console.log(sid);

  async function a() {
    console.log(456);
    await new Promise((res) => {
      setTimeout(() => {
        console.log(123);
      }, 0);
    });
    console.log(789);
  }
  a()



  // const aa = a();
  // console.log(aa); //

  // console.log("1");
  // const p = new Promise((resolve, reject) => {
  //   console.log("2");
  // });
  // console.log("3");

  // console.log("start");

  // const p = new Promise((resolve, reject) => {
  //   console.log("1");
  //   resolve("2");
  // });

  // p.then((res) => {
  //   console.log(res);
  // });

  // console.log("end");

  // console.log("strt");

  // const p = new Promise((resolve, reject) => {
  //   console.log(1);
  //   resolve(2);
  //   console.log(3);
  // });

  // p.then((res) => {
  //   console.log(res);
  // });

  // console.log("end");

  // console.log("start"); // 1

  // const fn = () => {
  //   return new Promise((resolve, reject) => {
  //     console.log(1); // 3
  //     resolve(2);
  //   });
  // };

  // console.log(3); // 2

  // fn().then((res) => {
  //   console.log(res); // 5
  // });

  // console.log("end"); // 4

  // 同步>回调>异步
  // const p = new Promise((resolve, reject) => {
  //   console.log(1);
  //   setTimeout(() => {
  //     console.log("timerStart");
  //     resolve("resolve");
  //     console.log("timerEnd");
  //   }, 0);
  //   console.log(2);
  // });

  // p.then((res) => {
  //   console.log(res);
  // });

  // console.log("end");

  // console.log("start");

  // const promise1 = Promise.resolve().then(() => {
  //   // 1
  //   console.log("promise1");
  //   const timer2 = setTimeout(() => {  // 3
  //     console.log("timer2");
  //   }, 0);
  // });

  // const timer1 = setTimeout(() => {
  //   // 2
  //   console.log("timer1");
  //   const promise2 = Promise.resolve().then(() => {  // 4
  //     console.log("promise2");
  //   });
  // }, 0);

  // console.log("end");

  // let promise1 = Promise.resolve()
  //   .then((res) => console.log(1)) // 2
  //   .then((res) => console.log(2))
  //   .then((res) => console.log(10));
  // let promise2 = new Promise((reject, resolve) =>
  //   setTimeout(() => {console.log(6);resolve();})
  // ).then((res) => console.log(3));
  // console.log(typeof main());
  // async function main() {
  //   console.log(4); // 1
  //   setTimeout(() => {console.log(12)},1);
  //   console.log(await Promise.race([promise2, promise1]));//und
  //   console.log(5);
  //   return { obj: 5 };
  // }
  // let promise3 = Promise.resolve()
  //   .then((res) => console.log(8))
  //   .then((res) => console.log(9))
  //   .then((res) => console.log(11));

  // async function async1() {
  //   console.log("async1 start");
  //   await async2();
  //   console.log("async1 end");
  //   setTimeout(() => {
  //     console.log("timer1");
  //   }, 0);
  // }
  // async function async2() {
  //   setTimeout(() => {
  //     console.log("timer2");
  //   }, 0);
  //   console.log("async2");
  // }
  // async1();
  // setTimeout(() => {
  //   console.log("timer3");
  // }, 0);
  // console.log("start");

  // async function async1() {
  //   console.log("async1 start");
  //   await new Promise((resolve) => {
  //     console.log("promise1");
  //   });
  //   console.log("async1 success");
  //   return "async1 end";
  // }
  // console.log("srcipt start");
  // async1().then((res) => console.log(res));
  // console.log("srcipt end");
  // async function async1() {
  //   console.log("async1 start");
  //   await async2();
  //   console.log("async1 end");
  // }
  // async function async2() {
  //   console.log("async2");
  // }
  // console.log("script start");
  // setTimeout(function () {
  //   console.log("setTimeout");
  // }, 0);
  // async1();
  // new Promise(function (resolve) {
  //   console.log("promise1");
  //   resolve();
  // }).then(function () {
  //   console.log("promise2");
  // });
  // console.log("script end");


  async function testSometing() {
    console.log("执行testSometing");
    return "testSometing";
  }
  async function testAsync() {
    console.log("执行testAsync");
    return Promise.resolve("hello async");
  }
  async function test() {
    console.log("test start...");
    const v1 = await testSometing();
    console.log(v1);
    const v2 = await testAsync();
    console.log(v2);
    console.log(v1, v2);
  }
  test();
  var promise = new Promise((resolve) => {
    console.log("promise start...");
    resolve("promise");
  });
  promise.then((val) => console.log(val));
  console.log("test end...");

</script>

</html>